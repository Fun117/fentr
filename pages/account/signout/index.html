<!DOCTYPE html>
<html id="html" lang="en" class="dark">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- icon -->
        <link rel="icon" type="image/x-icon" href="../../../site_assets/assets/logo/CitoHubIcon.png">
        <title id="site-title">Fentr</title>
        <meta name="description" content="A web app that makes it easy to write code.">
        <!-- .webmanifest--> 
        <meta name="theme-color" content="#1a1a1a"/>
        <link rel="manifest" href="../../../site_assets/manifest/webmanifest.json" />
        <!-- CSS -->
        <link rel="stylesheet" href="../../../site_assets/css/root.css" />
        <link rel="stylesheet" href="../../../site_assets/css/button.css" />
        <link rel="stylesheet" href="../../../site_assets/css/account.css" />
        <!-- JS -->
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
        <script src="../../../site_assets/js/post.js"></script>
        <script src="../../../site_assets/js/cookie.js"></script>
        <!-- code font for google-->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&display=swap" rel="stylesheet">
        <!-- Font Awesome -->
        <script src="https://kit.fontawesome.com/9b65a345ec.js" crossorigin="anonymous"></script>
        <!-- 国旗アイコンcss-->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/4.1.3/css/flag-icons.min.css" rel="stylesheet">
        <!-- 暗号 -->
        <script src="../../../site_assets/js/api/crypto.js"></script>
        <!-- 通知機能 -->
        <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    </head>
    <body onload="startSc()" style="background-color: var(--background-2);">
    </body>
    <script>
        const obj = convertCookieToObject(document.cookie);
        let account_login = obj.account_login;
        if(account_login === 'true'){
            swal('アカウント','ログアウトしました','success')
            .then((value) => {
                accountCiikiesSeve('replace','account_login','false')
                accountCiikiesSeve('replace','account_user','null')
                accountCiikiesSeve('replace','account_email','null')
                accountCiikiesSeve('replace','account_password','null')
                window.open('../../../', '_self');
            });
        }else{
            swal('アカウント','ログインされていない為ログアウト出来ません。\nログインデータを削除しました','error')
            .then((value) => {
                accountCiikiesSeve('replace','account_login','false')
                accountCiikiesSeve('replace','account_user','null')
                accountCiikiesSeve('replace','account_email','null')
                accountCiikiesSeve('replace','account_password','null')
                window.open('../../../', '_self');
            });
        }
    </script>
    <!-- Glottologist読み込み -->
    <script  src="../../../site_assets/js/glottologist.js"></script>
    <script>
        const glot = new Glottologist();

        if(navigator.cookieEnabled){
            const obj = convertCookieToObject(document.cookie);
            if(obj !== ""){
                let jsonLang = obj.lang;
                if(jsonLang = ""){
                    glot.import("../../../site_assets/json/glot-data.json").then(() => {
                        glot.render();
                    });
                    let rootElement = document.documentElement;
                    lang =(rootElement.lang);
                    document.cookie = 'lang=' + lang+'; path=/';
                }else{
                    glot.render(jsonLang);
                }
            }else{
                glot.import("../../../site_assets/json/glot-data.json").then(() => {
                    glot.render();
                });
                let rootElement = document.documentElement;
                lang =(rootElement.lang);
                document.cookie = 'lang=' + lang+'; path=/';
            }
        }

        document.addEventListener('DOMContentLoaded', function(){
            const obj = convertCookieToObject(document.cookie);
            let jsonLang = obj.lang;
            glot.import("../../../site_assets/json/glot-data.json").then(() => {
                glot.render(jsonLang);
                setLangTextForm()
            });
            setLangTextForm()
        });

        const ar = document.getElementById('ar');
        const zh = document.getElementById('zh');
        const en = document.getElementById('en');
        const id = document.getElementById('id');
        const ja = document.getElementById('ja');
        const ms = document.getElementById('ms');
        const es = document.getElementById('es');


        function setLangTextForm(){
            let rootElement = document.documentElement;
            lang =(rootElement.lang);
            if(lang === "ar"){
                document.getElementById("site-title").innerHTML = "Fentr"
            }else{
                if(lang === "zh"){
                    document.getElementById("site-title").innerHTML = "Fentr"
                }else{
                    if(lang === "en"){
                        document.getElementById("site-title").innerHTML = "Fentr"
                    }else{
                        if(lang === "id"){
                            document.getElementById("site-title").innerHTML = "Fentr"
                        }else{
                            if(lang === "ja"){
                                document.getElementById("site-title").innerHTML = "Fentr"
                            }else{
                                if(lang === "ms"){
                                    document.getElementById("site-title").innerHTML = "Fentr"
                                }else{
                                    if(lang === "es"){
                                        document.getElementById("site-title").innerHTML = "Fentr"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }

        function langCiikiesSeve(){
            if(navigator.cookieEnabled){
                let rootElement = document.documentElement;
                lang =(rootElement.lang);
                console.log(lang)
                document.cookie = 'lang=' + lang+'; path=/';
                const obj = convertCookieToObject(document.cookie);
            }
            setLangTextForm()
        };

        const class_mode_light = document.getElementById('class_light')
        const class_mode_dark = document.getElementById('class_dark')


        function class_modeCiikiesSeve(){
            if(navigator.cookieEnabled){
                let rootElement = document.documentElement;
                html_class =(rootElement.className);
                document.cookie = 'html_class=' + html_class+'; path=/';
                const obj = convertCookieToObject(document.cookie);
            }
            setLangTextForm()
        }


        function accountCiikiesSeve(mode,dataTitle,dataText){
            if(navigator.cookieEnabled){
                if(mode === 'replace'){
                    document.cookie = dataTitle + '=' + dataText +'; path=/';
                }
                const obj = convertCookieToObject(document.cookie);
            }
            setLangTextForm()
        }


        function convertCookieToObject(cookies) {
            const cookieItem = cookies.split(';');
            const obj = {};
            cookieItem.forEach((item) => {
                const element = item.split('=');
                const key = element[0].trim();
                const value = decodeURIComponent(element[1]);
                obj[key] = value;
            });
            return obj;
        }
    </script>
</html>